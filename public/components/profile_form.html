<!-- profile_form.html -->
<!-- 中文注释：用户资料编辑卡片组件（迁移至 public/components，纯 HTML 模板，无内联脚本）
     使用说明：
     1. 入口脚本加载 `src/js/components/profile-form.js`，统一绑定交互与事件
     2. 本组件仅承载结构与语义标签，逻辑全部外置，便于构建与预览
-->

<div id="profileFormModal" class="fixed inset-0 bg-black bg-opacity-40 hidden items-center justify-center z-50">
  <div class="bg-white rounded-xl shadow-lg w-full max-w-lg mx-4 p-6 relative">
    <!-- 关闭按钮 -->
    <button onclick="closeProfileForm()" class="absolute top-3 right-3 text-gray-400 hover:text-gray-600">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- 标题 -->
    <h2 class="text-xl font-semibold text-gray-800 mb-6" data-i18n="profile">个人资料</h2>

    <!-- 表单 -->
    <form id="profileForm" class="space-y-6" onsubmit="handleProfileSubmit(event)">
      <!-- 头像上传 -->
      <div class="flex items-center space-x-4">
        <div class="relative">
          <img
            id="profileAvatarPreview"
            src="https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Modern%20minimalist%20user%20avatar%20icon%2C%20circular%20design%2C%20clean%20lines%2C%20professional%20style%2C%20blue%20gradient%20background&image_size=square"
            alt="Avatar Preview"
            class="w-20 h-20 rounded-full object-cover border-2 border-gray-200"
          />
          <label
            for="profileAvatarInput"
            class="absolute bottom-0 right-0 bg-blue-600 text-white rounded-full p-1.5 cursor-pointer hover:bg-blue-700 transition-colors"
          >
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
            </svg>
          </label>
          <input
            type="file"
            id="profileAvatarInput"
            accept="image/*"
            class="hidden"
            onchange="handleAvatarChange(event)"
          />
        </div>
        <div class="flex-1">
          <p class="text-sm text-gray-600" data-i18n="avatarUploadTip">点击相机图标上传头像</p>
          <p class="text-xs text-gray-500" data-i18n="avatarSizeTip">建议尺寸 200x200px</p>
        </div>
      </div>

      <!-- 昵称 -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="nickname">昵称</label>
        <input
          type="text"
          id="profileNickname"
          maxlength="20"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="请输入昵称"
        />
        <p class="text-xs text-gray-500 mt-1">
          <span data-i18n="characterLimit">字符限制：</span>
          <span id="nicknameCounter">0</span>/20
        </p>
      </div>

      <!-- 个人简介 -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="bio">个人简介</label>
        <textarea
          id="profileBio"
          rows="3"
          maxlength="200"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
          placeholder="介绍一下自己..."
        ></textarea>
        <p class="text-xs text-gray-500 mt-1">
          <span data-i18n="characterLimit">字符限制：</span>
          <span id="bioCounter">0</span>/200
        </p>
      </div>

      <!-- 邮箱（只读） -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="email">邮箱</label>
        <input
          type="email"
          id="profileEmail"
          readonly
          class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"
        />
      </div>

      <!-- 用户ID（只读） -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="userId">用户ID</label>
        <input
          type="text"
          id="profileUserId"
          readonly
          class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 text-xs"
        />
      </div>

      <!-- 错误提示 -->
      <div id="profileError" class="text-sm text-red-600 hidden"></div>

      <!-- 成功提示 -->
      <div id="profileSuccess" class="text-sm text-green-600 hidden" data-i18n="profileUpdateSuccess">资料更新成功！</div>

      <!-- 按钮组 -->
      <div class="flex space-x-3 pt-4">
        <button
          type="button"
          onclick="closeProfileForm()"
          class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
          data-i18n="cancel"
        >
          取消
        </button>
        <button
          type="submit"
          class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
          data-i18n="save"
        >
          保存
        </button>
      </div>
    </form>
  </div>
</div>

<!-- 中文注释：移除内联脚本，交互逻辑已迁移至 js/components/profile-form.js，由入口统一初始化。 -->

