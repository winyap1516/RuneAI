# 测试用例清单 (Test Cases)

## 1. 分类导航 (Category Navigation)

1.  **TC-001: 默认加载**
    *   **步骤**: 打开首页。
    *   **预期**: 左侧侧栏显示所有顶级分类；右侧显示 "All Links" 或默认视图；Loading 骨架屏显示 200-700ms 后消失。

2.  **TC-002: 分类切换**
    *   **步骤**: 点击侧栏 "Top Category 1"。
    *   **预期**: 右侧列表刷新，仅显示属于该分类的卡片；URL 更新为 `?category=top-category-1` (假设)。

3.  **TC-003: 子分类展开**
    *   **步骤**: 点击带有子分类的顶级分类前的展开箭头。
    *   **预期**: 子分类列表展开显示；父分类保持选中或非选中状态。

4.  **TC-004: 空分类状态**
    *   **步骤**: 点击一个没有关联卡片的分类。
    *   **预期**: 右侧显示 "No cards found" 空状态插画；不应报错。

5.  **TC-005: 移动端侧栏**
    *   **步骤**: 将视口宽度调整为 < 768px；点击汉堡菜单。
    *   **预期**: 侧栏作为抽屉从左侧滑出；遮罩层覆盖背景。

## 2. 卡片列表与展示 (Card List & Display)

6.  **TC-006: 列表渲染性能**
    *   **步骤**: 加载包含 100 张卡片的列表；快速滚动到底部。
    *   **预期**: 滚动流畅 (60fps)；图片懒加载正常；无白屏或布局错位。

7.  **TC-007: 长标题处理**
    *   **步骤**: 找到标题超过 180 字符的卡片。
    *   **预期**: 标题截断显示 (ellipsis) 或自动换行，不破坏卡片高度布局。

8.  **TC-008: 长预览文本处理**
    *   **步骤**: 找到 Content Preview 超过 500 字符的卡片。
    *   **预期**: 文本被截断，显示 "Read more" 或类似提示；卡片高度保持一致。

9.  **TC-009: 缺失头像处理**
    *   **步骤**: 找到 Owner Avatar 为 null 的卡片。
    *   **预期**: 显示默认占位头像 (如首字母或通用图标)；不显示破损图片图标。

10. **TC-010: 图片/音频媒体展示**
    *   **步骤**: 找到包含 Image/Audio 的卡片。
    *   **预期**: 图片作为缩略图显示；音频显示播放控件占位符。

11. **TC-011: 热度显示**
    *   **步骤**: 找到 Views > 100,000 的卡片。
    *   **预期**: 数字格式化显示 (e.g., "100k+" 或 "102.5k")，而非长数字串。

## 3. 卡片交互 (Card Interactions)

12. **TC-012: 卡片详情侧板**
    *   **步骤**: 点击任意卡片主体。
    *   **预期**: 右侧滑出详情面板；URL 变更；背景变暗 (如果设计如此)。

13. **TC-013: 订阅操作 (Subscribe)**
    *   **步骤**: 点击未订阅卡片的 "Subscribe" 按钮。
    *   **预期**: 按钮状态立即变为 "Subscribed" (Loading 状态可选)；Toast 提示 "Subscribed successfully"。

14. **TC-014: 取消订阅 (Unsubscribe)**
    *   **步骤**: 点击已订阅卡片的 "Subscribed" 按钮。
    *   **预期**: 状态变回 "Subscribe"；Toast 提示 "Unsubscribed"。

15. **TC-015: 删除草稿卡片**
    *   **步骤**: 点击状态为 `draft` 的卡片删除按钮；在确认模态框点击 "Delete"。
    *   **预期**: 模拟 200ms 延迟后卡片从列表消失；Toast 提示 "Deleted"。

16. **TC-016: 删除已发布卡片 (二次确认)**
    *   **步骤**: 点击状态为 `published` 的卡片删除按钮。
    *   **预期**: 弹出确认模态框，提示 "Requires unpublish confirmation"；确认后才删除。

## 4. 创建与编辑 (Create & Edit)

17. **TC-017: 创建自定义分类 (成功)**
    *   **步骤**: 点击分类侧栏 "+" 号；输入名称 "My Custom List"；点击确认。
    *   **预期**: 侧栏立即出现新分类；Toast 提示 "Category created"。

18. **TC-018: 创建自定义分类 (失败)**
    *   **步骤**: 同上，但模拟后端返回 500。
    *   **预期**: 侧栏不添加新项；Toast 显示错误信息；输入框保留刚才的内容以便重试。

19. **TC-019: 生成摘要 (Generate Now)**
    *   **步骤**: 点击 "Generate Now" 按钮。
    *   **预期**: 列表顶部插入一张新卡片；高亮显示或有动画效果。

20. **TC-020: 生成日报 (Generate Digest)**
    *   **步骤**: 点击 "Generate Today's Digest"。
    *   **预期**: 触发不同的 Action；Toast 提示 "Digest generation started"。

## 5. 错误处理与边界 (Error Handling & Edge Cases)

21. **TC-021: 网络错误**
    *   **步骤**: 模拟 `NETWORK_ERROR` (加载 `cards-error.json`)。
    *   **预期**: 页面中心显示错误重试页 (Empty State with Retry button)；点击 Retry 重新发起请求。

22. **TC-022: 权限拒绝**
    *   **步骤**: 模拟操作返回 `RLS_FORBIDDEN`。
    *   **预期**: Toast 提示 "Permission denied"；用户被重定向或保持原状。

23. **TC-023: 重复卡片**
    *   **步骤**: 创建卡片时模拟 `DUPLICATE_CARD` 错误。
    *   **预期**: 表单显示内联错误 "Card already exists"。

24. **TC-024: 超大数据量**
    *   **步骤**: 加载 `cards-500-items.json`。
    *   **预期**: 页面响应时间 < 2s；滚动依然流畅。

25. **TC-025: 极窄屏幕**
    *   **步骤**: 调整宽度至 320px (iPhone SE)。
    *   **预期**: 布局自适应；无水平滚动条；按钮可点击。

## 6. 状态与过滤 (Status & Filtering)

26. **TC-026: 筛选 Published**
    *   **步骤**: 使用过滤器选择 "Published"。
    *   **预期**: 列表中仅显示 status 为 published 的卡片。

27. **TC-027: 筛选 Archived**
    *   **步骤**: 使用过滤器选择 "Archived"。
    *   **预期**: 列表中仅显示 status 为 archived 的卡片。

28. **TC-028: 搜索功能**
    *   **步骤**: 在搜索框输入 "Card Title 1"。
    *   **预期**: 列表实时过滤，显示匹配项。

29. **TC-029: 排序**
    *   **步骤**: 选择 "Newest First"。
    *   **预期**: 卡片按 `created_at` 倒序排列。

30. **TC-030: 错误卡片展示**
    *   **步骤**: 筛选 status 为 `error` 的卡片。
    *   **预期**: 卡片显示红色边框或警告图标；显示 `meta.error_message`。
