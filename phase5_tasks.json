[
  {
    "id": "TASK-P5-001",
    "title": "Integrate Supabase SDK",
    "priority": "P0",
    "description": "Add @supabase/supabase-js via CDN to index.html and refactor supabaseClient.js to use it.",
    "source": "PHASE5_PLAN",
    "status": "DONE",
    "depends_on": [],
    "files": ["index.html", "js/services/supabaseClient.js"],
    "branch": "feat/supabase-sdk",
    "commit_message": "chore: integrate supabase sdk"
  },
  {
    "id": "TASK-P5-002",
    "title": "Implement Auth UI Logic",
    "priority": "P0",
    "description": "Create js/features/auth_ui.js to handle login/signup form submissions using the new client. Handle auth state changes.",
    "source": "PHASE5_PLAN",
    "status": "DONE",
    "depends_on": ["TASK-P5-001"],
    "files": ["js/features/auth_ui.js", "js/main.js"],
    "branch": "feat/auth-ui-logic",
    "commit_message": "feat(auth): implement login and signup logic"
  },
  {
    "id": "TASK-P5-003",
    "title": "Connect Auth to Sync Trigger",
    "priority": "P0",
    "description": "Ensure linkController.initSyncAfterLogin() is called upon successful authentication to migrate/merge data.",
    "source": "PHASE5_PLAN",
    "status": "DONE",
    "depends_on": ["TASK-P5-002"],
    "files": ["js/features/auth_ui.js", "js/controllers/linkController.js"],
    "branch": "feat/auth-sync-connect",
    "commit_message": "feat(sync): trigger sync after login"
  },
  {
    "id": "TASK-P5-004",
    "title": "Create Conflict Resolution Modal",
    "priority": "P1",
    "description": "Implement a UI modal (js/components/modal-conflict.js) that shows Server vs Local data diff and allows user choice.",
    "source": "PHASE5_PLAN",
    "status": "OBSOLETE",
    "depends_on": [],
    "files": ["js/components/modal-conflict.js", "components/modal_conflict.html"],
    "branch": "feat/conflict-modal",
    "commit_message": "feat(ui): add conflict resolution modal"
  },
  {
    "id": "TASK-P5-005",
    "title": "Integrate Conflict Handling in SyncAgent",
    "priority": "P1",
    "description": "Update syncAgent.js to pause queue and show modal when conflicts occur (RPC returns conflicts array).",
    "source": "PHASE5_PLAN",
    "status": "TODO",
    "depends_on": ["TASK-P5-004"],
    "files": ["js/sync/syncAgent.js", "js/sync/conflict.js"],
    "branch": "feat/sync-conflict-flow",
    "commit_message": "feat(sync): handle conflicts via ui"
  },
  {
    "id": "TASK-P5-006",
    "title": "PWA Manifest & Icons",
    "priority": "P2",
    "description": "Add manifest.json and ensure icons are served correctly. Configure theme colors.",
    "source": "PHASE5_PLAN",
    "status": "TODO",
    "depends_on": [],
    "files": ["manifest.json", "index.html"],
    "branch": "feat/pwa-manifest",
    "commit_message": "feat(pwa): add manifest.json"
  },
  {
    "id": "TASK-P5-007",
    "title": "Automatic field-level merge + tombstone",
    "priority": "P1",
    "description": "Implement LWW merge with conflict/deletion backups and non-blocking notifications.",
    "source": "PHASE5_PLAN",
    "status": "IN_PROGRESS",
    "depends_on": [],
    "files": ["supabase/migrations/phase5/001_field_lww_tombstone.sql", "js/sync/syncAgent.js", "js/sync/changeLog.js", "js/storage/db.js"],
    "branch": "phase5/5.2/auto-merge-and-tombstone",
    "commit_message": "feat(sync): automatic field-level merge + tombstone deletion (#P5-007)"
  },
  {
    "id": "TASK-P5-DOC-001",
    "title": "Update README & Landing Docs",
    "priority": "P0",
    "description": "Update README.md to reflect the current Phase 5 architecture (Supabase + Local-First).",
    "source": "DOC_AUDIT",
    "status": "TODO",
    "depends_on": [],
    "files": ["README.md"],
    "branch": "docs/phase5-update",
    "commit_message": "docs: update readme for phase 5"
  },
  {
    "id": "TASK-P5-DOC-002",
    "title": "Update Architecture Docs",
    "priority": "P1",
    "description": "Update ARCHITECTURE.md with Sync Protocol details and new Auth Flow.",
    "source": "DOC_AUDIT",
    "status": "TODO",
    "depends_on": [],
    "files": ["docs/ARCHITECTURE.md"],
    "branch": "docs/arch-update",
    "commit_message": "docs: update architecture with sync protocol"
  }
]
